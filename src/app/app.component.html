<mat-tab-group class="demo-tab-group">
  <mat-tab label="Set Up">
    <section>
      <div class="margin-left-5rem-top-1rem" >
        <b class="color-red">1. Click Button #1 and wait for the number of games to stop increasing.</b>
      </div>
      <div class="margin-left-5rem-top-1rem" >
        <b class="color-red">2. Once you have downloaded all the games, click Button #2.</b>
      </div>
      <div class="margin-left-5rem-top-1rem" >
        <b class="color-red">3. You can now access the other sections at the top of the page.</b>
      </div>
      <button class="margin-left-5rem-top-1rem" [disabled]="!checkTabStatus()" mat-button
        (click)="downloadLastYear()">1. Download as far as Last Year</button>
      <div class="margin-left-5rem-top-1rem">
        Number of Games Downloaded: {{currentDownloadCounter}} <span><i>{{currentDownloadCounterPostMsg}}</i></span>
      </div>
      <ng-container *ngIf="currentDownloadCounter < 800 && currentDownloadCounter !== 0">
        <div class="cell" class="margin-left-5rem-top-1rem">
          <div class="wrapper">
            <div class="spinner spinner4"></div>
          </div>
        </div>
      </ng-container>
      <button class="margin-left-5rem-top-1rem" mat-button [disabled]="!checkTabStatus2()" (click)="crunchNumbers()">2.
        Crunch(process) Data</button>
      <div class="margin-left-5rem-top-1rem">Process Opponent Data Status: <i>{{crunchStatus}}</i></div>
    </section>
  </mat-tab>
  <mat-tab label="Basic Stats" [disabled]="checkTabStatus()">
    <mat-slide-toggle class="margin-left-5rem-top-1rem"
      (change)="toggleAvgTotalStatus($event)">{{totalAvgToggle}}</mat-slide-toggle>
    <div class="basic-stats-header">
      <!-- <mat-form-field> -->
      <small>Search Filter</small>
      <div><input (keyup)="applyFilter($any($event.target).value)"></div>
      <!-- </mat-form-field> -->
    </div>
    <div class="basic-stats-container mat-elevation-z8">
      <mat-table [dataSource]="dataSource" matSort>
        <ng-container matColumnDef="teamName">
          <mat-header-cell *matHeaderCellDef mat-sort-header> Team </mat-header-cell>
          <mat-cell *matCellDef="let row"> {{row.teamName}} </mat-cell>
        </ng-container>
        <ng-container matColumnDef="games">
          <mat-header-cell *matHeaderCellDef mat-sort-header> Games </mat-header-cell>
          <mat-cell *matCellDef="let row"> </mat-cell>
        </ng-container>
        <ng-container *ngIf="totalAvgToggle === 'Total'" matColumnDef="passingAttempts">
          <mat-header-cell *matHeaderCellDef mat-sort-header> PassAttempts </mat-header-cell>
          <mat-cell *matCellDef="let row"> {{row.passingAttemptsTotal}} </mat-cell>
        </ng-container>
        <ng-container *ngIf="totalAvgToggle === 'Average'" matColumnDef="passingAttempts">
          <mat-header-cell *matHeaderCellDef mat-sort-header> PassAttempts </mat-header-cell>
          <mat-cell *matCellDef="let row"> {{calculateAverage(row.passingAttemptsTotal, row.teamId)}} </mat-cell>
        </ng-container>
        <ng-container *ngIf="totalAvgToggle === 'Total'" matColumnDef="passingYards">
          <mat-header-cell *matHeaderCellDef mat-sort-header> PassYards </mat-header-cell>
          <mat-cell *matCellDef="let row"> {{row.passingYardsTotal}} </mat-cell>
        </ng-container>
        <ng-container *ngIf="totalAvgToggle === 'Average'" matColumnDef="passingYards">
          <mat-header-cell *matHeaderCellDef mat-sort-header> PassYards </mat-header-cell>
          <mat-cell *matCellDef="let row"> {{calculateAverage(row.passingYardsTotal, row.teamId)}} </mat-cell>
        </ng-container>
        <ng-container *ngIf="totalAvgToggle === 'Total'" matColumnDef="passingTds">
          <mat-header-cell *matHeaderCellDef mat-sort-header> PassTDs </mat-header-cell>
          <mat-cell *matCellDef="let row"> {{row.passingTdsTotal}} </mat-cell>
        </ng-container>
        <ng-container *ngIf="totalAvgToggle === 'Average'" matColumnDef="passingTds">
          <mat-header-cell *matHeaderCellDef mat-sort-header> PassTDs </mat-header-cell>
          <mat-cell *matCellDef="let row"> {{calculateAverage(row.passingTdsTotal, row.teamId)}} </mat-cell>
        </ng-container>
        <ng-container *ngIf="totalAvgToggle === 'Total'" matColumnDef="rushingAttempts">
          <mat-header-cell *matHeaderCellDef mat-sort-header> RushAttempts </mat-header-cell>
          <mat-cell *matCellDef="let row"> {{row.rushingAttemptsTotal}} </mat-cell>
        </ng-container>
        <ng-container *ngIf="totalAvgToggle === 'Average'" matColumnDef="rushingAttempts">
          <mat-header-cell *matHeaderCellDef mat-sort-header> RushAttempts </mat-header-cell>
          <mat-cell *matCellDef="let row"> {{calculateAverage(row.rushingAttemptsTotal, row.teamId)}} </mat-cell>
        </ng-container>
        <ng-container *ngIf="totalAvgToggle === 'Total'" matColumnDef="rushingYards">
          <mat-header-cell *matHeaderCellDef mat-sort-header> RushYards </mat-header-cell>
          <mat-cell *matCellDef="let row"> {{row.rushingYardsTotal}} </mat-cell>
        </ng-container>
        <ng-container *ngIf="totalAvgToggle === 'Average'" matColumnDef="rushingYards">
          <mat-header-cell *matHeaderCellDef mat-sort-header> RushYards </mat-header-cell>
          <mat-cell *matCellDef="let row"> {{calculateAverage(row.rushingYardsTotal, row.teamId)}} </mat-cell>
        </ng-container>
        <ng-container *ngIf="totalAvgToggle === 'Total'" matColumnDef="rushingTDs">
          <mat-header-cell *matHeaderCellDef mat-sort-header> RushTDs </mat-header-cell>
          <mat-cell *matCellDef="let row"> {{row.rushingTdsTotal}} </mat-cell>
        </ng-container>
        <ng-container *ngIf="totalAvgToggle === 'Average'" matColumnDef="rushingTDs">
          <mat-header-cell *matHeaderCellDef mat-sort-header> RushTDs </mat-header-cell>
          <mat-cell *matCellDef="let row"> {{calculateAverage(row.rushingTdsTotal, row.teamId)}} </mat-cell>
        </ng-container>
        <ng-container *ngIf="totalAvgToggle === 'Total'" matColumnDef="sacks">
          <mat-header-cell *matHeaderCellDef mat-sort-header> Sacks </mat-header-cell>
          <mat-cell *matCellDef="let row"> {{row.sacksTotal}} </mat-cell>
        </ng-container>
        <ng-container *ngIf="totalAvgToggle === 'Average'" matColumnDef="sacks">
          <mat-header-cell *matHeaderCellDef mat-sort-header> Sacks </mat-header-cell>
          <mat-cell *matCellDef="let row"> {{calculateAverage(row.sacksTotal, row.teamId)}} </mat-cell>
        </ng-container>
        <ng-container *ngIf="totalAvgToggle === 'Total'" matColumnDef="interceptions">
          <mat-header-cell *matHeaderCellDef mat-sort-header> Interceptions </mat-header-cell>
          <mat-cell *matCellDef="let row"> {{row.interceptionsTotal}} </mat-cell>
        </ng-container>
        <ng-container *ngIf="totalAvgToggle === 'Average'" matColumnDef="interceptions">
          <mat-header-cell *matHeaderCellDef mat-sort-header> Interceptions </mat-header-cell>
          <mat-cell *matCellDef="let row"> {{calculateAverage(row.interceptionsTotal, row.teamId)}} </mat-cell>
        </ng-container>
        <ng-container *ngIf="totalAvgToggle === 'Total'" matColumnDef="firstDowns">
          <mat-header-cell *matHeaderCellDef mat-sort-header> FirstDowns </mat-header-cell>
          <mat-cell *matCellDef="let row"> {{row.firstDownsTotal}} </mat-cell>
        </ng-container>
        <ng-container *ngIf="totalAvgToggle === 'Average'" matColumnDef="firstDowns">
          <mat-header-cell *matHeaderCellDef mat-sort-header> FirstDowns </mat-header-cell>
          <mat-cell *matCellDef="let row"> {{calculateAverage(row.firstDownsTotal, row.teamId)}} </mat-cell>
        </ng-container>
        <ng-container matColumnDef="thirdDownPct">
          <mat-header-cell *matHeaderCellDef mat-sort-header> thirdDown% </mat-header-cell>
          <mat-cell *matCellDef="let row"> {{row.thirdDownPctAvg | number : '1.2-2'}} %</mat-cell>
        </ng-container>
        <ng-container matColumnDef="redzoneScoringPct">
          <mat-header-cell *matHeaderCellDef mat-sort-header> redzoneScoring% </mat-header-cell>
          <mat-cell *matCellDef="let row"> {{row.redzoneScoringPctAvg | number : '1.2-2'}} %</mat-cell>
        </ng-container>
        <ng-container *ngIf="totalAvgToggle === 'Total'" matColumnDef="points">
          <mat-header-cell *matHeaderCellDef mat-sort-header> Points </mat-header-cell>
          <mat-cell *matCellDef="let row"> {{row.pointsTotal}} </mat-cell>
        </ng-container>
        <ng-container *ngIf="totalAvgToggle === 'Average'" matColumnDef="points">
          <mat-header-cell *matHeaderCellDef mat-sort-header> Points </mat-header-cell>
          <mat-cell *matCellDef="let row"> {{calculateAverage(row.pointsTotal, row.teamId)}} </mat-cell>
        </ng-container>
        <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
        <mat-row *matRowDef="let row; columns: displayedColumns;">
        </mat-row>
      </mat-table>

      <!-- <mat-paginator [pageSize]="pageSize" [pageSizeOptions]="[5, 10, 25, 100]"></mat-paginator> -->
    </div>
  </mat-tab>
</mat-tab-group>
